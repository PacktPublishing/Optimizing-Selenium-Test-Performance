var contentScript=function(e){"use strict";function t(e,t,n,r){return new(n||(n=Promise))(function(s,i){function o(e){try{a(r.next(e))}catch(e){i(e)}}function l(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(o,l)}a((r=r.apply(e,t)).next())})}function n(e){return(...t)=>new Promise((n,r)=>e(...t,e=>n(e)))}function r(e,t,n,r){const i=[];t=t.trim();for(const n of Array.from(e.getElementsByTagName("a"))){const e=s(n);(r&&e.indexOf(t)>=0||!r&&e===t)&&i.push(n)}return i}function s(e){if("A"!==e.tagName)return"";let t=e.innerText||e.textContent||"";t=(t=(t=(t=t.replace(/[\u200b\u200e\u200f]/g,"")).replace(/(\r\n|\r|\n)/g,"\n")).replace(/\n/g," ")).replace(/[\ \f\t\v\u2028\u2029]+/g," ");const n=window.getComputedStyle(e).textTransform;return"capitalize"===n?t=t.replace(/(^|\s)(\S)/g,(e,...t)=>t[0]+t[1].toUpperCase()):"uppercase"===n?t=t.toUpperCase():"lowercase"===n&&(t=t.toLowerCase()),t.trim().replace(/\xa0/g," ")}function i(e){return e?e.replace(/'/g,"''"):e}function o(e){return e?e.replace(/''/g,"'"):e}function l(e,t){if(!e.parentElement)return-1;const n=e.parentElement.children;let r=0;for(const s of Array.from(n))if(u(s,t)){if(s===e)return r;r++}return-1}function a(e,t,n){let r=0;const s=e.children,i=s.length,o=n>=0?n:-n-2;for(let e=n>=0?0:s.length-1;n>=0?e<i:e>=0;e+=n>=0?1:-1){const n=s[e];if(u(n,t)){if(o===r)return n;r++}}return null}function u(e,t){if(!t||"*"===t||"tag"===t||"webelement"===t)return!0;if("html"===g(e)&&("dom"===t||"webdocument"===t))return!0;const n=g(e);return n===t.toLowerCase()||n+"tag"===t.toLowerCase()}function c(e){const t=e.childNodes;let n="";for(const e of Array.from(t))if(3===e.nodeType){const t=e.nodeValue;t&&t.trim().length>0&&(n+=h(t))}return n.length>0?n:null}function h(e){return e?e.replace(/[\r\n]/g,""):e}function f(e,t){const n=t.toLowerCase();if("tagname"===n)return g(e);if("style"===n)return""+e.getAttribute("style");if("innertext"===n)return c(e);if("valid"===n)return e.ownerDocument?"True":"False";if("visible"===n){const t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility?"True":"False"}if("enabled"===n)return!0===e.disabled?"False":"True";if("hasfocus"===n)return e.ownerDocument.activeElement===e?"True":"False";if("smartid"===n)return z.getSmartValues(e).smartId;if("smartvalue"===n)return z.getSmartValues(e).smartValue;if("safeclass"===n)return d(e);{let n;const r=e[t];if(r&&""+r!=""&&"object"!=typeof r)n=r;else{if(!e.hasAttribute(t))return null;n=e.getAttribute(t)}return n="boolean"==typeof n?n?"True":"False":n?""+n:null}}function d(e){const t=e.classList;if(!t||0===t.length)return null;const n=[];for(const e of Array.from(t))-1===e.search(G)&&n.push(e);return n.sort(),n.length>0?n.join(" "):null}function g(e){return e.tagName.toLowerCase().replace(/.+:/g,"")}function p(e){const t=g(e);return"frame"===t||"iframe"===t}function m(e,t){const n=e.classList;return n&&0!==n.length?Array.from(n).filter(e=>e&&!G.test(e)&&-1===t.indexOf(e)).sort().map(e=>"\\b"+e+"\\b").join(".*"):null}function w(e){const t=e.all,n=new Set;for(let e=-0;e<t.length;e++){const r=t[e].classList;r&&r.length>0&&Array.from(r).forEach(e=>n.add(e))}return Array.from(n).sort()}function y(e){let t=e._rxpid_;return void 0===t&&(t=e._rxpid_=J++),t}function b(e){const t=[],n={};return e.forEach(e=>{const r=y(e);n[r]||t.push(e),n[r]=!0}),t}function v(e,t,n){let r=t;(e=e.optimize()).absolute&&(r=r.ownerDocument.documentElement);let s=[],i=[];s.push(r);for(let t=0;t<e.steps.length;t++){const r=e.steps[t];i=b(s),s=[];const o=r.axis===X.Child&&1===r.predicates.length&&r.predicates[0].isComparisonPred&&r.predicates[0].op===Y.Index;let l=null,c=null,h=null;const f=r.axis===X.DescendantOrSelf&&1===r.predicates.length&&(l=r.predicates[0]).isComparisonPred,d=f&&l&&l.op===Y.Equal&&"attribute"===(c=l.left).type&&l.right&&("string"===(h=l.right).type||"var"===h.type),g=f&&l&&l.op===Y.UniqueId,p=[];if(g||d){const e=c?c.attrName:null;g&&l&&(h=l.left);for(const t of i)if(null===e||"id"===e){let e=!1;if(h){const n=h.getStringValue(t,r.nodeName),i=t.ownerDocument.getElementById(n||"");i&&(e=u(i,r.nodeName))&&s.push(i),(g||e)&&p.push(t)}}}if(o){s=[];const e=parseInt(r.predicates[0].left.getStringValue(document.documentElement,r.nodeName)||"",10);if(e!==Number.NaN&&0!==e)for(const t of i){const n=a(t,r.nodeName,e-1);n&&s.push(n)}}else{let o=!1,l=null;r.predicates.length>1&&(o=(l=r.predicates[r.predicates.length-1]).isComparisonPred&&(l.op===Y.ResultSelectIndex||l.op===Y.Index))&&(l.op=Y.ResultSelectIndex);const a=!o&&n&&t===e.steps.length-1;for(const e of i){if(a&&s.length>0)break;-1===p.indexOf(e)&&S(r,r.axis,e,s,a)}if(o){let e=!1,t=0;if(l)if((t=parseInt(l.left.getStringValue(document.documentElement,"*")||"",10))>=0){let t=1;for(const n of s)if(l.evaluate(n,"*",t++)){s=[n],e=!0;break}}else{let t=-1;for(let n=s.length-1;n>=0;n--){const r=s[n];if(l.evaluate(r,"",t--)){s=[r],e=!0;break}}}e||(s=[])}}r.optional&&i.forEach(e=>s.push(e))}return s=b(s),n&&s.length>1?s.slice(0,1):s}function S(e,t,n,r,s){if(t===X.Ancestor||t===X.AncestorOrSelf){let i=n;if(t===X.AncestorOrSelf&&E(n,e,r)&&s)return;let o;for(;null!=(o=x(i));){if(E(o,e,r)&&s)return;i=o}}else if(t===X.Child)try{const t=n.children;for(const n of Array.from(t))if(null!=n&&E(n,e,r)&&s)return}catch(e){console.warn("Failed to collect children: "+e)}else if(t===X.Descendant||t===X.DescendantOrSelf)A(n,e,r,t===X.DescendantOrSelf,s);else if(t===X.Parent){const t=x(n);if(null!=t&&E(t,e,r)&&s)return}else if(t===X.Self){if(E(n,e,r)&&s)return}else if(t===X.FollowingSibling){const t=n.parentElement?n.parentElement.children:[];for(let i=l(n,"*")+1;i<t.length;i++){const n=t[i];if(n&&E(n,e,r)&&s)return}}else if(t===X.PrecedingSibling){const t=n.parentElement?n.parentElement.children:[];for(let i=l(n,"*")-1;i>=0;i--){const n=t[i];if(n&&E(n,e,r)&&s)return}}}function x(e){if(e.parentElement===e.ownerDocument.documentElement){const t=e.ownerDocument;return(t.defaultView||t.contentWindow).frameElement}return e.parentElement}function A(e,t,n,r,s){const i=new K;for(i.enqueue(e);i.getLength()>0;){const o=i.dequeue();if(o&&(e!==o||r)&&E(o,t,n)&&s)return;try{if(o)for(const e of Array.from(o.children))e&&i.enqueue(e)}catch(e){console.warn("Failed to collect children: "+e)}}}function E(e,t,n){if(!u(e,t.nodeName))return!1;for(const n of t.predicates){const r=n;if((!r.isComparisonPred||r.op!==Y.ResultSelectIndex)&&!n.evaluate(e,t.nodeName,0))return!1}return n.push(e),!0}function C(e){return e&&e.__esModule?e.default:e}function O(e,t){return t={exports:{}},e(t,t.exports),t.exports}function N(e,t,n,r,s,i,o,l,a,u){const c=new ne(!1,[]),d=[];for(let p=t;p<=n;p++){const t=e[p];d[p]=c.steps.length;let n=new re(c,X.Child,g(t),!1);if(o[p]){let e;e=a.xpathCompatible?new se(c,Y.Equal,new le("id"),new ue(h(o[p]))):new se(c,Y.UniqueId,new ue(h(o[p])),null),c.steps.push(new re(c,X.DescendantOrSelf,"",!1)),n.predicates.push(e),s[p]=!0}else if(l[p]){const e={flag:!1},o=[];for(const e of Array.from(t.attributes)){const n=e.nodeName;if("id"!==n||De.useId(a,t)){if("class"===n){if(!a.allowClass)continue;if(a.xpathCompatible){if(f(t,"safeclass")!==f(t,"class"))continue;o.push("class")}else o.push("safeclass")}a.resolveWeight(t,n)&&o.push(n)}}if(a.xpathCompatible||(a.allowUid&&o.push("smartid"),o.push("pathname")),a.allowText&&o.push(a.xpathCompatible?"text()":"innertext"),o.sort((e,n)=>a.resolveWeight(t,n)-a.resolveWeight(t,e)),a.allowAttributes){let l=r[p],h=i[p];!a.allowIndices&&r[p]<0&&(l=1,h=0);const f=T(o,t,l,e,a);s[p]=e.flag;const d=k(f,l,h,t,a,u);null!==d&&(d.setOwner(c),n.predicates.push(d))}else s[p]=!0}else n=new re(c,X.Child,"*",!1);c.steps.push(n)}const p=[];let m=-1;for(let e=t;e<=n;e++)if(l[e]){if(-1!==m){let n=m-t;const r=e-m;n=d[n],a.xpathCompatible||a.forceDeepLevelSkip||1!==r?p.push({replaceWithDescOrSelf:!0,startIndex:n,len:r}):p.push({replaceWithDescOrSelf:!1,startIndex:n,len:r})}m=-1}else-1===m&&(m=e);p.reverse();for(const e of p){for(let t=0;t<e.len;t++)c.steps.splice(e.startIndex,1);e.replaceWithDescOrSelf?c.steps.splice(e.startIndex,0,new re(c,X.DescendantOrSelf,"",!1)):(c.steps.splice(e.startIndex,0,new re(c,X.Child,"",!0)),c.steps.splice(e.startIndex+1,0,new re(c,X.Child,"",!0)))}return c}function T(e,t,n,r,s){r.flag=!0;const i=[];for(const o of e){if(0>=n){r.flag=!1;break}if(s.xpathCompatible&&"text()"===o&&0===t.childElementCount){const e=t.textContent;if(e&&e.length>0&&e.length<=s.maxMatchLength){i.push({key:".",value:e});continue}}const e=s.xpathCompatible?t.getAttribute(o):f(t,o);null!==e&&void 0!==e&&"data-fake"!==o&&i.push({key:o,value:e})}return i}function k(e,t,n,r,s,i){if(s.allowIndices&&-1===t){if(!r.parentElement)return null;const e=new ne(!0,[]);if(e.steps.push(new re(e,X.Child,g(r),!1)),1===e.apply(r.parentElement,!1).length)return null;const t=l(r,g(r))+1;return 0===t?null:new se(e,Y.Index,new ce(t),null)}let o=null;for(let l=n;l<Math.min(e.length,t);l++){const t=e[l];let n;const a=s.attributeMaxLen[t.key]||s.maxMatchLength;if(s.usePartialClassNameMatching&&!s.xpathCompatible&&"safeclass"===t.key){const e=m(r,i);if(e){const r=e.toString();n=new se(null,Y.Like,new le(t.key),new fe(r))}else n=null}else if(t.value.length<=a||s.xpathCompatible)n=new se(null,Y.Equal,new le(t.key),new ue(h(t.value)));else{const e=t.value.slice(0,a);n=new se(null,Y.StartsWithString,new le(t.key),new ue(h(e)))}o||(o=new ie(null,ee.And,[])),n&&o.children.push(n)}return o&&1===o.children.length?o.children[0]:o}function D(e,t){const n=[];n[e.length-1]=1e4;for(let r=0;r<e.length-1;r++)n[r]=P(e[r],t);return n}function P(e,t){let n=0;const r=g(e);let s;n+=s=t.tagScore[r]||(-1===r.indexOf("-")?t.tagScore["*"]:t.tagScore.customElements);for(const r of Array.from(e.attributes))r&&r.nodeValue&&r.nodeValue.length>0&&(s=t.resolveWeight(e,r.nodeName))>=100&&(n+=s-100);return n+=e.attributes.length}function I(e){e.RxSeSUT=new qe([new Ce,new Ne,new Ie,new De],[new F,new U,new pe,new te])}function q(e){I(e);const t=e.RxSeSUT,n=new V(e.chrome),r=new M(e.chrome);let s;R.addWindowEventListener("mousedown",e=>{2===e.button&&e.srcElement&&(s={element:e.srcElement,time:(new Date).getTime()},r.sendMessageToBackground({elementInfo:{isLink:"A"===s.element.tagName},msg:"mouse-target-update"}))},!0),n.listenToBackgroundRequests("build-selector",e=>{if(!s)return;const n=t.getDefaultOptions();for(const t of Object.keys(n))for(const r of n[t])Object.assign(r,{ignoreDynamicIds:e.ignoreDynamicIds});const i=e.forcedSelectorType?t.buildHappySelectorOfType(s.element,e.forcedSelectorType,n[e.forcedSelectorType]):t.buildHappySelector(s.element,n);return r.sendMessageToBackground(Object.assign({msg:"provide-happy-result",time:s.time},i)),{}}),n.listenToBackgroundRequests("devtools-disconnected",e=>{t.unhighlightElements()}),r.sendMessageToBackground({msg:"init-content-script",selectorTypes:Object.keys(t.getDefaultOptions())}),e.chrome&&e.chrome.runtime.connect().onDisconnect.addListener(r=>{L.log("[inject] background has disconnected"),n.removeAllListeners(),R.removeAll(),t.unhighlightElements(),e.RxSeSUT=void 0})}Object.assign;class L{static log(...e){window.__env}}class M{constructor(e){e&&(this.queryTabs=e.tabs&&n(e.tabs.query),this.sendMessageToTabRaw=e.tabs&&n(e.tabs.sendMessage),this.sendMessageToBackgroundRaw=e.runtime&&n(e.runtime.sendMessage),this.getFromLocalStore=e.storage&&n(e.storage.local.get))}sendMessageToBackground(e){return t(this,void 0,void 0,function*(){if(!this.sendMessageToBackgroundRaw)throw new Error("sendMessageToBackground is not available in this context");return L.log("[cau] send message to background",e),yield this.sendMessageToBackgroundRaw(e)})}sendMessageToTab(e,n){return t(this,void 0,void 0,function*(){if(!this.sendMessageToTabRaw)throw new Error("sendMessageToTab is not available in this context");return L.log("[cau] send message to tab",e,n),yield this.sendMessageToTabRaw(e,n)})}getCurrentTab(){return t(this,void 0,void 0,function*(){if(!this.sendMessageToTabRaw)throw new Error("getCurrentTab is not available in this context");const e=yield this.queryTabs({active:!0,currentWindow:!0});if(e&&1===e.length&&e[0]&&e[0].id)return e[0].id;throw new Error(`failed to identify current tab, got: ${e}`)})}getMainConfig(){return t(this,void 0,void 0,function*(){if(!this.getFromLocalStore)throw new Error("getMainConfig is not available in this context");const e=yield this.getFromLocalStore();return e&&(e.mainConfig||{})})}}class V{constructor(e){this.chromeApi=e,this.registeredHandlers=[]}listenToBackgroundRequests(e,t){if(L.log("[bh] register bg request listener",e),!this.chromeApi||!this.chromeApi.runtime||!this.chromeApi.runtime.onMessage)return;const n=(n,r,s)=>{if(n.msg===e){L.log("[bh] received known message in content script",n);const e=t(n);if(e&&"function"==typeof e.then)return e.then(s),!0;s(e)}else L.log("[bh] received unknown message in content script",n)};this.chromeApi.runtime.onMessage.addListener(n),this.registeredHandlers.push(n)}removeAllListeners(){this.registeredHandlers.forEach(e=>this.chromeApi.runtime.onMessage.removeListener(e))}}class j{constructor(){this.registeredHandlers=[]}addWindowEventListener(e,t,n){window.addEventListener(e,t,n),this.registeredHandlers.push({type:e,listener:t,useCapture:n})}removeAll(){this.registeredHandlers.forEach(e=>window.removeEventListener(e.type,e.listener,e.useCapture))}}var R=new j;class F{constructor(){this.selectorName="css"}apply(e,t,n){return n?[(e||document).querySelector(t)]:Array.from((e||document).querySelectorAll(t))}isValidSelector(e){try{return document.querySelector("fakeprefix>"+e),!0}catch(e){return!1}}}class U{constructor(){this.selectorName="link-text"}apply(e,t,n){return r(e,t,0,!1)}isValidSelector(e){return!!e}}var _;!function(e){e[e.Static=1]="Static",e[e.Dynamic=2]="Dynamic",e[e.Unknown=3]="Unknown"}(_||(_={}));class B{constructor(){this.staticCount=0,this.dynamicCount=0,this.sepCount=0,this.items=[]}extractValue(e){const t=this.regex.exec(e);return t?t.slice(1).join("-"):""}isDynamic(){const e=1===this.items.length,t=this.items.length>1&&this.dynamicCount>0,n=e&&this.dynamicCount>this.staticCount/2,r=e&&this.dynamicCount>0&&this.sepCount>=6&&this.classString.length>=40,s=e&&this.dynamicCount>=2;return t||n||r||s}toString(){return JSON.stringify(this)}}const W=["-","_",":",";",".","/","|"," ","[","]","{","}","(",")","+","?","!"];class ${}class H{static toPattern(e){const t=new B,n=H.classify(e),r=[],s=[];t.classString=n,r.push("^");let i="\0",o=!1;for(let l=0;l<e.length;l++){const a=n[l];o||"D"===i||"H"===i||"D"!==a&&"H"!==a?o&&"D"!==a&&"H"!==a&&(r.push(")"),o=!1):(r.push("("),o=!0),"H"===a||"D"===a?(t.dynamicCount++,a!==i&&r.push("D"===a?"\\d*":"[a-fA-F0-9]+")):("C"===a||"O"===a?(s.push(e[l]),t.staticCount++):"S"!==a||"C"!==i&&"O"!==i||s.push("-"),r.push(e[l].replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"))),"S"===a&&t.sepCount++,i=a}o&&r.push(")"),r.push("$"),t.regex=new RegExp(r.join(""),"");let l=s.join("");return"-"===l[l.length-1]&&(l=l.slice(0,l.length-1)),t.smartId=l,t}static createPatterns(e){const t=e.slice(0).sort((e,t)=>{const n=e.length-t.length;return 0!==n?n:e===t?0:e>t?1:-1}),n=[];for(;t.length>0;){const e={value:t[0],classifiedType:_.Unknown,labeledType:_.Unknown},r=H.toPattern(e.value);for(let e=t.length-1;e>=0;e--){const n=t[e];if(r.regex.test(n)){const s={value:n,classifiedType:_.Unknown,labeledType:_.Unknown};r.items.push(s),t.splice(e,1)}}n.push(r)}for(const e of n){const t=e.isDynamic();for(const n of e.items)n.classifiedType=t?_.Dynamic:_.Static}return n}static createIdMap(e){const t={};return H.createPatterns(e).forEach(e=>e.items.forEach(n=>t[n.value]=e)),t}static analyze(e){const t=new $,n=H.createIdMap(e);t.dynamicity=0,t.staticValues=[],t.dynamicValues=[];for(const e of Object.keys(n))n[e].isDynamic()?t.dynamicValues.push(e):t.staticValues.push(e);return e.length>0&&(t.dynamicity=t.dynamicValues.length/(t.dynamicValues.length+t.staticValues.length)),t.dynamicValues.sort(),t.staticValues.sort(),t}static classify(e){const t=[];for(const n of e)n>="0"&&n<="9"?t.push("D"):n>="a"&&n<="z"||n>="A"&&n<="Z"?t.push("C"):-1!==W.indexOf(n)?t.push("S"):t.push("O");let n=0;for(let r=0;r<t.length;r++){const s=e[r];if(s>="0"&&s<="9"||s>="a"&&s<="f"||s>="A"&&s<="F")n++;else{if(n>=6&&"S"===t[r])for(let e=r-n;e<r;)t[e++]="H";n=0}}if(n>=6)for(let e=t.length-n;e<t.length;)t[e++]="H";return t.join("")}}class z{static isDynamic(e){return!e.ownerDocument||""===e.id||z.ensureMapCreatedAndFresh(e)[e.id].isDynamic()}static isDynamicString(e,t){const n=z.ensureMapCreatedAndFresh(t);return!!n[e]&&n[e].isDynamic()}static getSmartValues(e){if(!e.ownerDocument||""===e.id)return{smartId:null,smartValue:null};const t=z.ensureMapCreatedAndFresh(e)[e.id];return{smartId:t.smartId||null,smartValue:t.extractValue(e.id)}}static ensureMapCreatedAndFresh(e){const t=e.ownerDocument;let n=t._rx_dynid;if(!n||!n[e.id]){const r=[],s=e.ownerDocument.all;for(let e=0;e<s.length;e++){const t=s[e];t.hasAttribute("id")&&""!==t.getAttribute("id")&&r.push(t.getAttribute("id"))}n=H.createIdMap(r),t._rx_dynid=n}return n}}const G=/hover|over|^in$|active|inactive|selected|open|closed|focus|clearfix/i;class Z extends Error{static buildMessage(e,t){function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function r(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,e=>"\\x0"+n(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>"\\x"+n(e))}function s(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,e=>"\\x0"+n(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>"\\x"+n(e))}function i(e){return o[e.type](e)}const o={literal:e=>'"'+r(e.text)+'"',class(e){const t=e.parts.map(e=>Array.isArray(e)?s(e[0])+"-"+s(e[1]):s(e));return"["+(e.inverted?"^":"")+t+"]"},any:()=>"any character",end:()=>"end of input",other:e=>e.description};return"Expected "+function(e){const t=e.map(i);let n,r;if(t.sort(),t.length>0){for(n=1,r=1;n<t.length;n++)t[n-1]!==t[n]&&(t[r]=t[n],r++);t.length=r}switch(t.length){case 1:return t[0];case 2:return t[0]+" or "+t[1];default:return t.slice(0,-1).join(", ")+", or "+t[t.length-1]}}(e)+" but "+function(e){return e?'"'+r(e)+'"':"end of input"}(t)+" found."}constructor(e,t,n,r){super(),this.message=e,this.expected=t,this.found=n,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,Z)}}const Q=function(e,t){function n(){return e.substring(on,sn)}function r(e,t){return{type:"literal",text:e,ignoreCase:t}}function s(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function i(t){let n,r=ln[t];if(r)return r;for(n=t-1;!ln[n];)n--;for(r={line:(r=ln[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return ln[t]=r,r}function l(e,t){const n=i(e),r=i(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function a(e){sn<un||(sn>un&&(un=sn,cn=[]),cn.push(e))}function u(e,t,n){return new Z(Z.buildMessage(e,t),e,t,n)}function c(){let t,n,r,s;for(t=sn,n=[],r=f();r!==q;)n.push(r),r=f();if(n!==q){for(r=[],s=h();s!==q;)r.push(s),s=h();r!==q?(47===e.charCodeAt(sn)?(s=V,sn++):(s=q,0===hn&&a(j)),s===q&&(s=null),s!==q?(on=t,t=n=R(n,r)):(sn=t,t=q)):(sn=t,t=q)}else sn=t,t=q;return t}function h(){let t,n,r,s;return t=sn,47===e.charCodeAt(sn)?(n=V,sn++):(n=q,0===hn&&a(j)),n!==q?(r=sn,hn++,47===e.charCodeAt(sn)?(s=V,sn++):(s=q,0===hn&&a(j)),hn--,s!==q?(sn=r,r=void 0):r=q,r===q&&(r=f()),r!==q?(on=t,t=n=F(r)):(sn=t,t=q)):(sn=t,t=q),t}function f(){let e,t,n,r,s;if(e=sn,(t=d())!==q)if((n=k())!==q){for(r=[],s=m();s!==q;)r.push(s),s=m();r!==q?(on=e,e=t=U(t,r)):(sn=e,e=q)}else sn=e,e=q;else sn=e,e=q;return e}function d(){let t,n,r,s,i,o;return t=sn,(n=k())!==q?(e.substr(sn,2)===_?(r=_,sn+=2):(r=q,0===hn&&a(B)),r!==q&&(s=k())!==q?(on=t,t=n=W()):(sn=t,t=q)):(sn=t,t=q),t===q&&(t=sn,(n=k())!==q?(46===e.charCodeAt(sn)?(r=$,sn++):(r=q,0===hn&&a(H)),r!==q&&(s=k())!==q?(on=t,t=n=z()):(sn=t,t=q)):(sn=t,t=q),t===q&&(t=sn,(n=k())!==q&&(r=g())!==q&&(s=k())!==q&&(i=p())!==q&&(o=k())!==q?(on=t,t=n=G(r,i)):(sn=t,t=q),t===q&&(t=sn,(n=k())!==q&&(r=p())!==q&&(s=k())!==q?(on=t,t=n=Q(r)):(sn=t,t=q)))),t}function g(){let t,n,r,s,i;return t=sn,e.substr(sn,4)===J?(n=J,sn+=4):(n=q,0===hn&&a(K)),n===q&&(e.substr(sn,6)===ee?(n=ee,sn+=6):(n=q,0===hn&&a(te)),n===q&&(e.substr(sn,5)===oe?(n=oe,sn+=5):(n=q,0===hn&&a(ge)),n===q&&(n=sn,e.substr(sn,10)===pe?(r=pe,sn+=10):(r=q,0===hn&&a(me)),r!==q?(s=sn,hn++,45===e.charCodeAt(sn)?(i=we,sn++):(i=q,0===hn&&a(ye)),hn--,i===q?s=void 0:(sn=s,s=q),s!==q?n=r=[r,s]:(sn=n,n=q)):(sn=n,n=q),n===q&&(e.substr(sn,18)===be?(n=be,sn+=18):(n=q,0===hn&&a(ve)),n===q&&(n=sn,e.substr(sn,8)===Se?(r=Se,sn+=8):(r=q,0===hn&&a(xe)),r!==q?(s=sn,hn++,45===e.charCodeAt(sn)?(i=we,sn++):(i=q,0===hn&&a(ye)),hn--,i===q?s=void 0:(sn=s,s=q),s!==q?n=r=[r,s]:(sn=n,n=q)):(sn=n,n=q),n===q&&(e.substr(sn,16)===Ae?(n=Ae,sn+=16):(n=q,0===hn&&a(Ee)),n===q&&(e.substr(sn,17)===Ce?(n=Ce,sn+=17):(n=q,0===hn&&a(Oe)),n===q&&(e.substr(sn,17)===Ne?(n=Ne,sn+=17):(n=q,0===hn&&a(Te)))))))))),n!==q?(e.substr(sn,2)===ke?(r=ke,sn+=2):(r=q,0===hn&&a(De)),r!==q?(on=t,t=n=Pe(n)):(sn=t,t=q)):(sn=t,t=q),t}function p(){let t,n,r,s;return t=sn,(n=C())!==q?(r=sn,hn++,63===e.charCodeAt(sn)?(s=Ie,sn++):(s=q,0===hn&&a(qe)),hn--,s===q?r=void 0:(sn=r,r=q),r!==q?(on=t,t=n=Le(n)):(sn=t,t=q)):(sn=t,t=q),t===q&&(t=sn,(n=C())!==q?(63===e.charCodeAt(sn)?(r=Ie,sn++):(r=q,0===hn&&a(qe)),r!==q?(on=t,t=n=Me(n)):(sn=t,t=q)):(sn=t,t=q),t===q&&(t=sn,63===e.charCodeAt(sn)?(n=Ie,sn++):(n=q,0===hn&&a(qe)),n!==q&&(on=t,n=Ve()),(t=n)===q&&(t=sn,42===e.charCodeAt(sn)?(n=je,sn++):(n=q,0===hn&&a(Re)),n!==q&&(on=t,n=Fe()),t=n))),t}function m(){let t,n,r,s,i,o,l;return t=sn,91===e.charCodeAt(sn)?(n=Ue,sn++):(n=q,0===hn&&a(_e)),n!==q&&(r=k())!==q?((s=w())===q&&(s=null),s!==q&&(i=k())!==q?(93===e.charCodeAt(sn)?(o=Be,sn++):(o=q,0===hn&&a(We)),o!==q&&(l=k())!==q?(on=t,t=n=$e(s)):(sn=t,t=q)):(sn=t,t=q)):(sn=t,t=q),t}function w(){let t,n,r,s,i,o,l,u;if(t=sn,(n=y())!==q){for(r=[],s=sn,(i=k())!==q?(e.substr(sn,3)===He?(o=He,sn+=3):(o=q,0===hn&&a(ze)),o===q&&(e.substr(sn,2)===Ge?(o=Ge,sn+=2):(o=q,0===hn&&a(Ze))),o!==q&&(l=k())!==q&&(u=y())!==q?(on=s,s=i=Qe(n,o,u)):(sn=s,s=q)):(sn=s,s=q);s!==q;)r.push(s),s=sn,(i=k())!==q?(e.substr(sn,3)===He?(o=He,sn+=3):(o=q,0===hn&&a(ze)),o===q&&(e.substr(sn,2)===Ge?(o=Ge,sn+=2):(o=q,0===hn&&a(Ze))),o!==q&&(l=k())!==q&&(u=y())!==q?(on=s,s=i=Qe(n,o,u)):(sn=s,s=q)):(sn=s,s=q);r!==q?(on=t,t=n=Je(n,r)):(sn=t,t=q)}else sn=t,t=q;return t===q&&(t=sn,(n=O())!==q&&(on=t,n=Ke(n)),(t=n)===q&&(t=sn,63===e.charCodeAt(sn)?(n=Ie,sn++):(n=q,0===hn&&a(qe)),n!==q&&(r=T())!==q?(on=t,t=n=Xe(r)):(sn=t,t=q),t===q&&(t=sn,35===e.charCodeAt(sn)?(n=Ye,sn++):(n=q,0===hn&&a(et)),n!==q&&(r=T())!==q?(on=t,t=n=tt(r)):(sn=t,t=q),t===q&&(t=sn,(n=b())!==q&&(on=t,n=Ke(n)),(t=n)===q&&(t=sn,(n=x())!==q&&(on=t,n=Ke(n)),t=n))))),t}function y(){let t,n,r,s,i,o,l;return t=sn,(n=E())!==q&&(r=k())!==q?(126===e.charCodeAt(sn)?(s=nt,sn++):(s=q,0===hn&&a(rt)),s===q&&(61===e.charCodeAt(sn)?(s=st,sn++):(s=q,0===hn&&a(it)),s===q&&(e.substr(sn,2)===ot?(s=ot,sn+=2):(s=q,0===hn&&a(lt)),s===q&&(s=sn,62===e.charCodeAt(sn)?(i=at,sn++):(i=q,0===hn&&a(ut)),i!==q?(o=sn,hn++,61===e.charCodeAt(sn)?(l=st,sn++):(l=q,0===hn&&a(it)),hn--,l===q?o=void 0:(sn=o,o=q),o!==q?s=i=[i,o]:(sn=s,s=q)):(sn=s,s=q),s===q&&(s=sn,60===e.charCodeAt(sn)?(i=ct,sn++):(i=q,0===hn&&a(ht)),i!==q?(o=sn,hn++,61===e.charCodeAt(sn)?(l=st,sn++):(l=q,0===hn&&a(it)),hn--,l===q?o=void 0:(sn=o,o=q),o!==q?s=i=[i,o]:(sn=s,s=q)):(sn=s,s=q),s===q&&(e.substr(sn,2)===ft?(s=ft,sn+=2):(s=q,0===hn&&a(dt)),s===q&&(e.substr(sn,2)===gt?(s=gt,sn+=2):(s=q,0===hn&&a(pt)),s===q&&(e.substr(sn,2)===mt?(s=mt,sn+=2):(s=q,0===hn&&a(wt))))))))),s!==q&&(i=k())!==q&&(o=E())!==q?(on=t,t=n=yt(n,s,o)):(sn=t,t=q)):(sn=t,t=q),t===q&&(t=sn,40===e.charCodeAt(sn)?(n=bt,sn++):(n=q,0===hn&&a(vt)),n!==q&&(r=k())!==q&&(s=w())!==q&&(i=k())!==q?(41===e.charCodeAt(sn)?(o=St,sn++):(o=q,0===hn&&a(xt)),o!==q?(on=t,t=n=$e(s)):(sn=t,t=q)):(sn=t,t=q)),t}function b(){let t,n,r,s,i;if(t=sn,n=[],r=sn,(s=v())!==q?(43===e.charCodeAt(sn)?(i=At,sn++):(i=q,0===hn&&a(Et)),i!==q?(on=r,r=s=Ct(s)):(sn=r,r=q)):(sn=r,r=q),r!==q)for(;r!==q;)n.push(r),r=sn,(s=v())!==q?(43===e.charCodeAt(sn)?(i=At,sn++):(i=q,0===hn&&a(Et)),i!==q?(on=r,r=s=Ct(s)):(sn=r,r=q)):(sn=r,r=q);else n=q;return n!==q&&(r=v())!==q?(on=t,t=n=Ot(n,r)):(sn=t,t=q),t}function v(){let e;return(e=T())===q&&(e=x()),e}function S(){let t,n,r;return t=sn,64===e.charCodeAt(sn)?(n=Nt,sn++):(n=q,0===hn&&a(Tt)),n!==q&&(r=C())!==q?(on=t,t=n=kt(r)):(sn=t,t=q),t}function x(){let t,n,r;return t=sn,36===e.charCodeAt(sn)?(n=Dt,sn++):(n=q,0===hn&&a(Pt)),n!==q&&(r=C())!==q?(on=t,t=n=It(r)):(sn=t,t=q),t}function A(){let t,n,r;return t=sn,(n=C())!==q?(e.substr(sn,2)===qt?(r=qt,sn+=2):(r=q,0===hn&&a(Lt)),r!==q?(on=t,t=n=Mt(n)):(sn=t,t=q)):(sn=t,t=q),t}function E(){let e,t;return(e=b())===q&&(e=O())===q&&(e=N())===q&&(e=T())===q&&(e=A())===q&&(e=x())===q&&(e=S())===q&&(e=sn,(t=C())!==q&&(on=e,t=kt(t)),e=t),e}function C(){let t,n,r,s,i;if(t=sn,n=sn,Vt.test(e.charAt(sn))?(r=e.charAt(sn),sn++):(r=q,0===hn&&a(jt)),r!==q){for(s=[],Rt.test(e.charAt(sn))?(i=e.charAt(sn),sn++):(i=q,0===hn&&a(Ft));i!==q;)s.push(i),Rt.test(e.charAt(sn))?(i=e.charAt(sn),sn++):(i=q,0===hn&&a(Ft));s!==q?n=r=[r,s]:(sn=n,n=q)}else sn=n,n=q;return n!==q&&(on=t,n=Ut(n)),t=n}function O(){let t,n,r,s,i,o;if(t=sn,n=sn,45===e.charCodeAt(sn)?(r=we,sn++):(r=q,0===hn&&a(ye)),r===q&&(r=null),r!==q){if(s=[],_t.test(e.charAt(sn))?(i=e.charAt(sn),sn++):(i=q,0===hn&&a(Bt)),i!==q)for(;i!==q;)s.push(i),_t.test(e.charAt(sn))?(i=e.charAt(sn),sn++):(i=q,0===hn&&a(Bt));else s=q;s!==q?(i=sn,hn++,46===e.charCodeAt(sn)?(o=$,sn++):(o=q,0===hn&&a(H)),hn--,o===q?i=void 0:(sn=i,i=q),i!==q?n=r=[r,s,i]:(sn=n,n=q)):(sn=n,n=q)}else sn=n,n=q;return n!==q&&(on=t,n=Wt(n)),t=n}function N(){let t,n,r,s,i,o,l,u,c,h;if(t=sn,n=sn,45===e.charCodeAt(sn)?(r=we,sn++):(r=q,0===hn&&a(ye)),r===q&&(r=null),r!==q){if(s=[],_t.test(e.charAt(sn))?(i=e.charAt(sn),sn++):(i=q,0===hn&&a(Bt)),i!==q)for(;i!==q;)s.push(i),_t.test(e.charAt(sn))?(i=e.charAt(sn),sn++):(i=q,0===hn&&a(Bt));else s=q;if(s!==q){if(i=sn,46===e.charCodeAt(sn)?(o=$,sn++):(o=q,0===hn&&a(H)),o!==q){if(l=[],_t.test(e.charAt(sn))?(u=e.charAt(sn),sn++):(u=q,0===hn&&a(Bt)),u!==q)for(;u!==q;)l.push(u),_t.test(e.charAt(sn))?(u=e.charAt(sn),sn++):(u=q,0===hn&&a(Bt));else l=q;l!==q?i=o=[o,l]:(sn=i,i=q)}else sn=i,i=q;if(i===q&&(i=null),i!==q){if(o=sn,101===e.charCodeAt(sn)?(l=$t,sn++):(l=q,0===hn&&a(Ht)),l===q&&(69===e.charCodeAt(sn)?(l=zt,sn++):(l=q,0===hn&&a(Gt))),l!==q)if(43===e.charCodeAt(sn)?(u=At,sn++):(u=q,0===hn&&a(Et)),u===q&&(45===e.charCodeAt(sn)?(u=we,sn++):(u=q,0===hn&&a(ye))),u===q&&(u=null),u!==q){if(c=[],_t.test(e.charAt(sn))?(h=e.charAt(sn),sn++):(h=q,0===hn&&a(Bt)),h!==q)for(;h!==q;)c.push(h),_t.test(e.charAt(sn))?(h=e.charAt(sn),sn++):(h=q,0===hn&&a(Bt));else c=q;c!==q?o=l=[l,u,c]:(sn=o,o=q)}else sn=o,o=q;else sn=o,o=q;o===q&&(o=null),o!==q?n=r=[r,s,i,o]:(sn=n,n=q)}else sn=n,n=q}else sn=n,n=q}else sn=n,n=q;return n!==q&&(on=t,n=Zt()),t=n}function T(){let t,n,r,s;if(t=sn,39===e.charCodeAt(sn)?(n=Qt,sn++):(n=q,0===hn&&a(Jt)),n!==q){for(r=[],Kt.test(e.charAt(sn))?(s=e.charAt(sn),sn++):(s=q,0===hn&&a(Xt)),s===q&&(e.substr(sn,2)===Yt?(s=Yt,sn+=2):(s=q,0===hn&&a(en)));s!==q;)r.push(s),Kt.test(e.charAt(sn))?(s=e.charAt(sn),sn++):(s=q,0===hn&&a(Xt)),s===q&&(e.substr(sn,2)===Yt?(s=Yt,sn+=2):(s=q,0===hn&&a(en)));r!==q?(39===e.charCodeAt(sn)?(s=Qt,sn++):(s=q,0===hn&&a(Jt)),s!==q?(on=t,t=n=tn(r)):(sn=t,t=q)):(sn=t,t=q)}else sn=t,t=q;return t}function k(){let t,n;for(t=[],nn.test(e.charAt(sn))?(n=e.charAt(sn),sn++):(n=q,0===hn&&a(rn));n!==q;)t.push(n),nn.test(e.charAt(sn))?(n=e.charAt(sn),sn++):(n=q,0===hn&&a(rn));return t}function D(e){return e.join("")}function P(e){return"object"==typeof e&&e[0]?e[0]:e}function I(e){return e?e.replace(/\r\n/g,""):e}t=void 0!==t?t:{};const q={},L={rxpath:c};let M=c;const V="/",j=r("/",!1),R=function(e,t){const r=e.concat(t),s=new ne("/"===n()[0],r);return r.forEach(e=>{e.setOwner(s)}),s},F=function(e){return e||new re(null,X.DescendantOrSelf,null,!1)},U=function(e,t){const n=fn[e.a];if(void 0===n)throw new Error("Invalid axis name: "+e.a);const r=new re(null,n,e.v,e.o);return r.predicates=ie.groupParsedExpressions(t),r},_="..",B=r("..",!1),W=function(){return{a:"parent",v:null,o:!1}},$=".",H=r(".",!1),z=function(){return{a:"self",v:null,o:!1}},G=function(e,t){return{a:e,v:t.v,o:t.o}},Q=function(e){return{a:"child",v:e.v,o:e.o}},J="self",K=r("self",!1),ee="parent",te=r("parent",!1),oe="child",ge=r("child",!1),pe="descendant",me=r("descendant",!1),we="-",ye=r("-",!1),be="descendant-or-self",ve=r("descendant-or-self",!1),Se="ancestor",xe=r("ancestor",!1),Ae="ancestor-or-self",Ee=r("ancestor-or-self",!1),Ce="preceding-sibling",Oe=r("preceding-sibling",!1),Ne="following-sibling",Te=r("following-sibling",!1),ke="::",De=r("::",!1),Pe=function(e){return P(e)},Ie="?",qe=r("?",!1),Le=function(e){return{v:e,o:!1}},Me=function(e){return{v:e,o:!0}},Ve=function(){return{v:null,o:!0}},je="*",Re=r("*",!1),Fe=function(){return{v:null,o:!1}},Ue="[",_e=r("[",!1),Be="]",We=r("]",!1),$e=function(e){return e},He="and",ze=r("and",!1),Ge="or",Ze=r("or",!1),Qe=function(e,t,n){return{e:n,op:t}},Je=function(e,t){return[{e:e,op:"^"}].concat(t)},Ke=function(e){return new se(null,Y.Index,e,null)},Xe=function(e){return new se(null,Y.FullText,e,null)},Ye="#",et=r("#",!1),tt=function(e){return new se(null,Y.UniqueId,e,null)},nt="~",rt=r("~",!1),st="=",it=r("=",!1),ot="!=",lt=r("!=",!1),at=">",ut=r(">",!1),ct="<",ht=r("<",!1),ft=">=",dt=r(">=",!1),gt="<=",pt=r("<=",!1),mt="!~",wt=r("!~",!1),yt=function(e,t,n){t=P(t);const r=dn[t];return r!==Y.Like&&r!==Y.NotLike||!n.value||(n=new fe(n.value)),new se(null,r,e,n)},bt="(",vt=r("(",!1),St=")",xt=r(")",!1),At="+",Et=r("+",!1),Ct=function(e){return e},Ot=function(e,t){return new ae(null,e.concat(t))},Nt="@",Tt=r("@",!1),kt=function(e){return new le(e)},Dt="$",Pt=r("$",!1),It=function(e){return new de(null,e)},qt="()",Lt=r("()",!1),Mt=function(e){return new he(e)},Vt=/^[a-zA-Z_]/,jt=s([["a","z"],["A","Z"],"_"],!1,!1),Rt=/^[a-zA-Z0-9_\-]/,Ft=s([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),Ut=function(e){return e[0]+D(e[1])},_t=/^[0-9]/,Bt=s([["0","9"]],!1,!1),Wt=function(e){return new ce(parseInt((e[0]?"-":"")+D(e[1]),10))},$t="e",Ht=r("e",!1),zt="E",Gt=r("E",!1),Zt=function(){return new ce(parseFloat(n()))},Qt="'",Jt=r("'",!1),Kt=/^[^']/,Xt=s(["'"],!0,!1),Yt="''",en=r("''",!1),tn=function(e){return new ue(I(o(D(e))))},nn=/^[\t\r\n ]/,rn=s(["\t","\r","\n"," "],!1,!1);let sn=0,on=0;const ln=[{line:1,column:1}];let an,un=0,cn=[],hn=0;if("startRule"in t){if(!(t.startRule in L))throw new Error("Can't start parsing from rule \""+t.startRule+'".');M=L[t.startRule]}const fn={self:X.Self,parent:X.Parent,child:X.Child,descendant:X.Descendant,"descendant-or-self":X.DescendantOrSelf,ancestor:X.Ancestor,"ancestor-or-self":X.AncestorOrSelf,"following-sibling":X.FollowingSibling,"preceding-sibling":X.PrecedingSibling},dn={"~":Y.Like,"=":Y.Equal,"!=":Y.NotEqual,">":Y.GreaterThan,"<":Y.LessThan,">=":Y.GreaterOrEqual,"<=":Y.LessOrEqual,"!~":Y.NotLike};if((an=M())!==q&&sn===e.length)return an;throw an!==q&&sn<e.length&&a({type:"end"}),u(cn,un<e.length?e.charAt(un):null,un<e.length?l(un,un+1):l(un,un))};let J=1;class K{constructor(){this.queue=[],this.offset=0}getLength(){return this.queue.length-this.offset}enqueue(e){this.queue.push(e)}dequeue(){if(0===this.queue.length)return;const e=this.queue[this.offset];return 2*++this.offset>=this.queue.length&&(this.queue=this.queue.slice(this.offset),this.offset=0),e}}var X;!function(e){e[e.Self=0]="Self",e[e.Parent=1]="Parent",e[e.Child=2]="Child",e[e.Descendant=3]="Descendant",e[e.DescendantOrSelf=4]="DescendantOrSelf",e[e.Ancestor=5]="Ancestor",e[e.AncestorOrSelf=6]="AncestorOrSelf",e[e.FollowingSibling=7]="FollowingSibling",e[e.PrecedingSibling=8]="PrecedingSibling"}(X||(X={}));var Y;!function(e){e[e.Like=0]="Like",e[e.Equal=1]="Equal",e[e.NotEqual=2]="NotEqual",e[e.Index=3]="Index",e[e.ResultSelectIndex=4]="ResultSelectIndex",e[e.StartsWithString=5]="StartsWithString",e[e.GreaterThan=5]="GreaterThan",e[e.FullText=6]="FullText",e[e.GreaterOrEqual=7]="GreaterOrEqual",e[e.EndsWithString=8]="EndsWithString",e[e.LessThan=8]="LessThan",e[e.LessOrEqual=9]="LessOrEqual",e[e.UniqueId=10]="UniqueId",e[e.NotLike=11]="NotLike"}(Y||(Y={}));var ee;!function(e){e[e.And=0]="And",e[e.Or=1]="Or"}(ee||(ee={}));class te{constructor(){this.selectorName="rxpath"}apply(e,t,n){return ne.parse(t).apply(e,n)}isValidSelector(e){try{return ne.parse(e),!0}catch(e){return!1}}}class ne{constructor(e,t,n=null){this.absolute=e,this.steps=t,this.dataProvider=n}static parse(e){return Q(e,{})}clone(){const e=new ne(this.absolute,this.steps.map(e=>e.clone()),this.dataProvider);return e.steps.forEach(t=>t.setOwner(e)),e}toString(e){const t=this.steps;let n=this.absolute?"/":"";!this.absolute&&t.length>0&&t[0].axis===X.DescendantOrSelf&&0===t[0].predicates.length&&t[0].isNodeTestAny()&&(n="./");for(let r=0;r<t.length;r++)n+=t[r].toString(e),r<t.length-1&&(n+="/");return n}apply(e,t){return v(this,e||document.documentElement,t)}keepStep(e,t){return e.axis===X.Self&&e.isNodeTestAny()&&!e.hasPredicates()?{keep:!1}:e.axis!==X.DescendantOrSelf&&e.axis!==X.Descendant||!e.isNodeTestAny()||e.hasPredicates()||t.axis!==X.Child&&t.axis!==X.Descendant&&t.axis!==X.DescendantOrSelf?e.axis===X.DescendantOrSelf&&e.isNodeTestAny()&&!e.hasPredicates()&&t.axis===X.DescendantOrSelf&&t.isNodeTestAny()&&!t.hasPredicates()?{keep:!1}:e.axis!==X.Child||!e.isNodeTestAny()||e.hasPredicates()||t.axis!==X.DescendantOrSelf&&t.axis!==X.Descendant?{keep:!0}:{keep:!1}:{keep:!1,nextAxis:e.axis}}optimize(){if(!this.steps.some(e=>e.axis===X.Descendant||e.axis===X.DescendantOrSelf||e.axis===X.Self))return this;try{const e=this.steps.map(e=>e.clone()),t=[];for(let n=0;n<e.length-1;n++){const r=e[n],s=e[n+1],{keep:i,nextAxis:o}=this.keepStep(r,s);o&&(s.axis=o),i&&t.push(r)}return t.push(e[e.length-1]),new ne(this.absolute,t,this.dataProvider)}catch(e){const t=this.toString(!1);throw new Error(`Failed to optimize '${t}': ${e.message}`)}}appendResultSelectIndex(e){const t=this.steps[this.steps.length-1];if(t.predicates||(t.predicates=[]),0===t.predicates.length)t.predicates.push(new se(this,Y.NotEqual,new ce(0),new ce(1)));else if(2===t.predicates.length)return this;return t.predicates.push(new se(this,Y.ResultSelectIndex,new ce(e),null)),this}optionalize(){const e=this.clone();for(let t=0;t<e.steps.length-1;t++)e.steps[t].nodeName&&(e.steps[t].optional=!0);return e}}class re{constructor(e,t,n,r){this.owner=e,this.axis=t,this.nodeName=n,this.optional=r,this.predicates=[]}clone(){const e=new re(this.owner,this.axis,this.nodeName,this.optional);return e.predicates=this.predicates.map(e=>e.clone()),e}setOwner(e){this.owner=e,this.predicates.forEach(t=>t.setOwner(e))}toString(e){const{axis:t,nodeName:n,optional:r,predicates:s}=this;let i="",o=!1;t===X.Ancestor?i+="ancestor::":t===X.AncestorOrSelf?i+="ancestor-or-self::":t===X.Descendant?i+="descendant::":t===X.FollowingSibling?i+="following-sibling::":t===X.PrecedingSibling?i+="preceding-sibling::":t===X.DescendantOrSelf?!this.isNodeTestAny()||s.length>0?i+="descendant-or-self::":o=!0:t===X.Parent?this.isNodeTestAny()&&!this.optional?(i+="..",o=!0):i+="parent::":t===X.Self&&(this.isNodeTestAny()&&!this.optional?(i+=".",o=!0):i+="self::"),this.isNodeTestAny()?i+=r?"?":o?"":"*":i+=n+(r?"?":"");for(const t of s)i+="["+(t?t.toString(e):"")+"]";return i}isNodeTestAny(){return!this.nodeName||"*"===this.nodeName}hasPredicates(){return this.predicates.length>0}}class se{constructor(e,t,n,r){this.isComparisonPred=!0,this.owner=e,this.op=t,this.left=n,this.right=r}clone(){return new se(this.owner,this.op,this.left.clone(),this.right&&this.right.clone())}setOwner(e){this.owner=e,this.left&&this.left.setOwner(e),this.right&&this.right.setOwner(e)}evaluate(e,t,n){const{op:r,left:s,right:i}=this;if(r===Y.Equal)return!!i&&h(s.getStringValue(e,t))===h(i.getStringValue(e,t));if(r===Y.NotEqual)return!!i&&h(s.getStringValue(e,t))!==h(i.getStringValue(e,t));if(r===Y.Like){if(!i)return!1;if(i.regex)return i.matches(s.getStringValue(e,t)||"");if(s.regex)return s.matches(i.getStringValue(e,t)||"");if("concatlist"===i.type)return new fe(i.getStringValue(e,t)||"").matches(s.getStringValue(e,t)||"")}else if(r===Y.NotLike){if(!i)return!1;if(i.regex)return!i.matches(s.getStringValue(e,t)||"");if(s.regex)return!s.matches(i.getStringValue(e,t)||"");if("concatlist"===i.type)return!new fe(i.getStringValue(e,t)||"").matches(s.getStringValue(e,t)||"")}else{if(r===Y.Index){const n=l(e,t)+1;return s.getStringValue(e,t)===n.toString()}if(r===Y.ResultSelectIndex)return s.getStringValue(e,t)===n.toString();if(r===Y.StartsWithString&&i&&!i.isNumber){const n=s.getStringValue(e,t),r=i.getStringValue(e,t);return!(!n||!r)&&0===n.indexOf(r)}if(r===Y.EndsWithString&&i&&!i.isNumber){const n=s.getStringValue(e,t),r=i.getStringValue(e,t);return!!(n&&r&&n.length>=r.length)&&n.indexOf(r)===n.length-r.length}if(r===Y.GreaterThan||r===Y.GreaterOrEqual||r===Y.LessOrEqual||r===Y.LessThan){if(!i)return!1;const n=s.getStringValue(e,t),o=i.getStringValue(e,t),l=parseFloat(n||""),a=parseFloat(o||"");if(l===Number.NaN||a===Number.NaN)return!1;switch(r){case Y.GreaterThan:return l>a;case Y.GreaterOrEqual:return l>=a;case Y.LessOrEqual:return l<=a;case Y.LessThan:return l<a;default:return!1}}else{if(r===Y.UniqueId)return s.getStringValue(e,t)===e.id;if(r===Y.FullText){let n=s.getStringValue(e,t);if(!n)return!1;n=n.toLowerCase().trim();for(const t of Array.from(e.attributes))if((t.value||"").toLowerCase().indexOf(n)>=0)return!0;const r=c(e);return!!r&&r.toLowerCase().trim().indexOf(n)>=0}}}return!1}toString(e){let t="";const{op:n,left:r,right:s}=this;if(n===Y.Equal)t="=";else if(n===Y.Like)t="~";else if(n===Y.NotEqual)t="!=";else if(n===Y.NotLike)t="!~";else if(n===Y.GreaterThan)t=">";else if(n===Y.GreaterOrEqual)t=">=";else if(n===Y.LessThan)t="<";else if(n===Y.LessOrEqual)t="<=";else{if(n===Y.Index||n===Y.ResultSelectIndex){if(e&&r.varName){const t=r.toString(e).replace(/'/g,"");return parseInt(t,10)===Number.NaN?"0":t}return r.toString(e)}if(n===Y.FullText)return"?"+r.toString(e);if(n===Y.UniqueId)return"#"+r.toString(e)}return r.toString(e)+t+(s?s.toString(e):"")}}class ie{constructor(e,t,n){this.isBooleanPred=!0,this.owner=e,this.op=t,this.children=n}static groupParsedExpressions(e){if(0===e.length)return[];const t=[];for(const n of e){const e=ie.groupParsePredicate(n);t.push(e||new oe)}return t}static groupParsePredicate(e){if(!e)return null;if(void 0===e.length)return e;if(0===e.length)return null;if(1===e.length)return"^"===e[0].op?e[0].e:e[0];let t=null,n="";for(let r=0;r<e.length;r++){const s=e[r],i=e[r+1];if("^"===s.op){t=new ie(null,"and"===i.op?ee.And:ee.Or,[]);const e=ie.groupParsePredicate(s.e);e&&t.children.push(e),n=i.op}else if(s.op===n)if(s.e){const e=ie.groupParsePredicate(s.e);e&&t&&t.children.push(e)}else t&&t.children.push(s);else if(s.op!==n){const e=t;if(t=new ie(null,"and"===s.op?ee.And:ee.Or,e?[e]:[]),s.e){const e=ie.groupParsePredicate(s.e);e&&t&&t.children.push(e)}else t.children.push(s);n=s.op}}return t}clone(){return new ie(this.owner,this.op,this.children.map(e=>e.clone()))}setOwner(e){this.owner=e,this.children.forEach(t=>t.setOwner(e))}evaluate(e,t,n){if(this.op===ee.And){for(const r of this.children)if(!r.evaluate(e,t,n))return!1;return!0}if(this.op===ee.Or){for(const r of this.children)if(r.evaluate(e,t,n))return!0;return!1}throw new Error("Invalid boolean operator: "+this.op)}toString(e){let t="";for(let n=0;n<this.children.length;n++){const r=this.children[n],s=r.isBooleanPred;s&&(t+="("),t+=r.toString(e),s&&(t+=")"),n<this.children.length-1&&(t+=this.op===ee.And?" and ":" or ")}return t}}class oe{constructor(e){this.owner=e||null}clone(){return new oe(this.owner)}setOwner(e){this.owner=e}evaluate(e,t,n){return!0}toString(e){return""}}class le{constructor(e,t){this.type="attribute",this.isNumber=!1,this.attrName=e,this.owner=t||null}clone(){return new le(this.attrName,this.owner)}getStringValue(e,t){return f(e,this.attrName)}toString(e){return"."!==this.attrName?"@"+this.attrName:"."}matches(e){throw new Error("Unsupported")}setOwner(e){this.owner=e}}class ae{constructor(e,t){this.type="concatlist",this.isNumber=!1,this.owner=e,this.items=t}clone(){return new ae(this.owner,this.items.map(e=>e.clone()))}getStringValue(e,t){let n="";for(const r of this.items)n+=r.getStringValue(e,t);return n}toString(e){let t="";for(let n=0;n<this.items.length;n++)t+=this.items[n].toString(e),n<this.items.length-1&&(t+="+");return t}matches(e){throw new Error("Unsupported")}setOwner(e){this.owner=e,this.items.forEach(t=>t.setOwner(e))}}class ue{constructor(e,t){this.type="string",this.isNumber=!1,this.value=e,this.owner=t||null}clone(){return new ue(this.value,this.owner)}getStringValue(e,t){return this.value}toString(e){return"'"+i(this.value)+"'"}matches(e){return e===this.value}setOwner(e){this.owner=e}}class ce{constructor(e,t){this.type="number",this.isNumber=!0,this.value=e,this.owner=t||null}clone(){return new ce(this.value,this.owner)}getStringValue(e,t){return this.value.toString()}toString(e){return this.value.toString()}matches(e){return e===this.value}setOwner(e){this.owner=e}}class he{constructor(e,t){this.type="nodefunc",this.isNumber=!1,this.funcName=e,this.owner=t||null}clone(){return new he(this.funcName,this.owner)}getStringValue(e,t){const n=this.funcName;if("text"===n)return e.textContent;if("pos"===n){if(!e.parentElement)return"";const t=e.parentElement.children;for(let n=0;n<t.length;n++)if(t[n]===e)return n.toString();return""}if("null"===n)return null;if("index"===n){const n=l(e,t)+1;return 0===n?null:n.toString()}return"x"===n?e.getBoundingClientRect().left.toString():"cx"===n?e.clientLeft.toString():"y"===n?e.getBoundingClientRect().top.toString():"cy"===n?e.clientTop.toString():"width"===n?e.getBoundingClientRect().width.toString():"height"===n?e.getBoundingClientRect().height.toString():"first"===n?e.parentElement&&e.parentElement.children[0]===e?"True":"False":"last"===n?e.parentElement&&e.parentElement.children[e.parentElement.children.length-1]===e?"True":"False":""}toString(e){return this.funcName+"()"}matches(e){throw new Error("Unsupported")}setOwner(e){this.owner=e}}class fe{constructor(e,t){this.type="regex",this.isNumber=!1,this.regex=new RegExp(e),this.owner=t||null}clone(){return new fe(this.regex,this.owner)}getStringValue(e,t){return this.regex.source}toString(e){return"'"+i(this.regex.source)+"'"}matches(e){if("string"==typeof e)return this.regex.test(e);if("boolean"==typeof e||"number"==typeof e){const t=e.toString();return this.regex.test(t)}return!1}setOwner(e){this.owner=e}}class de{constructor(e,t){this.type="var",this.isNumber=!1,this.owner=e,this.varName=t}clone(){return new de(this.owner,this.varName)}getStringValue(e,t){return this.owner&&this.owner.dataProvider?this.owner.dataProvider(this.varName):null}toString(e){return e?this.owner&&this.owner.dataProvider?"'"+i(this.owner.dataProvider(this.varName))+"'":"":"$"+this.varName}matches(e){throw new Error("Unsupported")}setOwner(e){this.owner=e}}const ge=7;class pe{constructor(){this.selectorName="xpath"}apply(e,t,n){e&&e!==e.ownerDocument.documentElement&&"/"===t[0]&&(t="."+t);const r=e.ownerDocument.evaluate(t,e||document,null,ge,null),s=[];for(let e=0;e<r.snapshotLength;e++){const t=r.snapshotItem(e);if(t.nodeType===Node.ELEMENT_NODE&&(s.push(t),n))break}return s}isValidSelector(e){try{return document.evaluate("/fakeprefix/"+e,document,null,ge,null),!0}catch(e){return!1}}}var me="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},we=O(function(e,t){function n(e){return e.split(" ").reverse().map(function(e,t){var n=0===t,l=e.split(":"),a=o(l,2),u=a[0],c=a[1],h=null,f=null;if(function(){switch(!0){case/>/.test(u):f=function(e){return function(t){return t(e.parent)&&e.parent}};break;case/^\./.test(u):var e=u.substr(1).split(".");h=function(t){var n=t.attribs.class;return n&&e.every(function(e){return n.indexOf(e)>-1})},f=function(t,r){return n?t.getElementsByClassName(e.join(" ")):"function"==typeof t?t(h):s(t,r,h)};break;case/^\[/.test(u):var t=u.replace(/\[|\]|"/g,"").split("="),l=o(t,2),a=l[0],c=l[1];h=function(e){return!(!(Object.keys(e.attribs).indexOf(a)>-1)||c&&e.attribs[a]!==c)},f=function(e,t){if(n){var o=function(){var t=[];return r([e],function(e){h(e)&&t.push(e)}),{v:t}}();if("object"===(void 0===o?"undefined":i(o)))return o.v}return"function"==typeof e?e(h):s(e,t,h)};break;case/^#/.test(u):var d=u.substr(1);h=function(e){return e.attribs.id===d},f=function(e,t){if(n){var o=function(){var t=[];return r([e],function(e,n){h(e)&&(t.push(e),n())}),{v:t}}();if("object"===(void 0===o?"undefined":i(o)))return o.v}return"function"==typeof e?e(h):s(e,t,h)};break;case/\*/.test(u):h=function(e){return!0},f=function(e,t){if(n){var o=function(){var t=[];return r([e],function(e){return t.push(e)}),{v:t}}();if("object"===(void 0===o?"undefined":i(o)))return o.v}return"function"==typeof e?e(h):s(e,t,h)};break;default:h=function(e){return e.name===u},f=function(e,t){if(n){var o=function(){var t=[];return r([e],function(e){h(e)&&t.push(e)}),{v:t}}();if("object"===(void 0===o?"undefined":i(o)))return o.v}return"function"==typeof e?e(h):s(e,t,h)}}}(),!c)return f;var d=c.match(/-(child|type)\((\d+)\)$/),g=d[1],p=parseInt(d[2],10)-1,m=function(e){if(e){var t=e.parent.childTags;if("type"===g&&(t=t.filter(h)),t.findIndex(function(t){return t===e})===p)return!0}return!1};return function(e){var t=f(e);return n?t.reduce(function(e,t){return m(t)&&e.push(t),e},[]):m(t)&&t}})}function r(e,t){e.forEach(function(e){var n=!0;t(e,function(){return n=!1}),e.childTags&&n&&r(e.childTags,t)})}function s(e,t,n){for(;e.parent;){if(e=e.parent,n(e))return e;if(e===t)break}return null}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){var n=[],r=!0,s=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){s=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(s)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=function(e,t){if(me.document)return!1;me.document=t.context||function(){for(var t=e;t.parent;)t=t.parent;return t}();var s=Object.getPrototypeOf(me.document);return Object.getOwnPropertyDescriptor(s,"childTags")||Object.defineProperty(s,"childTags",{enumerable:!0,get:function(){return this.children.filter(function(e){return"tag"===e.type||"script"===e.type||"style"===e.type})}}),Object.getOwnPropertyDescriptor(s,"attributes")||Object.defineProperty(s,"attributes",{enumerable:!0,get:function(){var e=this.attribs,t=Object.keys(e),n=t.reduce(function(t,n,r){return t[r]={name:n,value:e[n]},t},{});return Object.defineProperty(n,"length",{enumerable:!1,configurable:!1,value:t.length}),n}}),s.getAttribute||(s.getAttribute=function(e){return this.attribs[e]||null}),s.getElementsByTagName||(s.getElementsByTagName=function(e){var t=[];return r(this.childTags,function(n){n.name!==e&&"*"!==e||t.push(n)}),t}),s.getElementsByClassName||(s.getElementsByClassName=function(e){var t=e.trim().replace(/\s+/g," ").split(" "),n=[];return r([this],function(e){var r=e.attribs.class;r&&t.every(function(e){return r.indexOf(e)>-1})&&n.push(e)}),n}),s.querySelectorAll||(s.querySelectorAll=function(e){var t=this,r=n(e=e.replace(/(>)(\S)/g,"$1 $2").trim()),s=r.shift(),i=r.length;return s(this).filter(function(e){for(var n=0;n<i;){if(!(e=r[n](e,t)))return!1;n+=1}return!0})}),s.contains||(s.contains=function(e){var t=!1;return r([this],function(n,r){n===e&&(t=!0,r())}),t}),!0},e.exports=t.default});C(we);var ye=O(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertNodeList=function(e){for(var t=e.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];return n},t.escapeValue=function(e){return e&&e.replace(/['"`\\/:\?&!#$%^()[\]{|}*+;,.<=>@~]/g,"\\$&").replace(/\n/g,"A")}});C(ye);ye.convertNodeList,ye.escapeValue;var be=O(function(e,t){function n(e,t,n,s){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.parentNode,o=r(e,t,n);return!(!o||1!==i.querySelectorAll(o).length)&&(s.unshift(o),!0)}function r(e,t,n){for(var r=t.attributes,s=Object.keys(r).sort(function(t,n){var s=e.indexOf(r[t].name),i=e.indexOf(r[n].name);return-1===i?-1===s?0:-1:s-i}),i=0,o=s.length;i<o;i++){var l=s[i],c=r[l],h=c.name,f=(0,ye.escapeValue)(c.value);if(!a(n[h]||n.attribute,h,f,u[h]||u.attribute)){var d="["+h+'="'+f+'"]';return!1===/\b\d/.test(f)&&("id"===h&&(d="#"+f),"class"===h&&(d="."+f.trim().replace(/\s+/g,"."))),d}}return null}function s(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.parentNode,s=i(e,t);return!(!s||1!==r.getElementsByTagName(s).length)&&(n.unshift(s),!0)}function i(e,t){var n=e.tagName.toLowerCase();return a(t.tag,null,n)?null:n}function o(e,t,n,r){for(var s=t.parentNode,i=s.childTags||s.children,o=0,a=i.length;o<a;o++){var u=i[o];if(u===t){var c=l(e,u,n);if(!c)return console.warn("\n          Element couldn't be matched through strict ignore pattern!\n        ",u,n,c);var h="> "+c+":nth-child("+(o+1)+")";return r.unshift(h),!0}}return!1}function l(e,t,n){var s=r(e,t,n);return s||(s=i(t,n)),s}function a(e,t,n,r){if(!n)return!0;var s=e||r;return!!s&&s(t,n,r)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=t.root,i=void 0===r?document:r,a=t.skip,u=void 0===a?null:a,c=t.priority,h=void 0===c?["id","class","href","src"]:c,f=t.ignore,d=void 0===f?{}:f,g=[],p=e,m=g.length,w=!1,y=u&&(Array.isArray(u)?u:[u]).map(function(e){return"function"!=typeof e?function(t){return t===e}:e});for(Object.keys(d).forEach(function(e){"class"===e&&(w=!0);var t=d[e];"function"!=typeof t&&("number"==typeof t&&(t=t.toString()),"string"==typeof t&&(t=new RegExp((0,ye.escapeValue)(t).replace(/\\/g,"\\\\"))),"boolean"==typeof t&&(t=t?/(?:)/:/.^/),d[e]=function(e,n){return t.test(n)})}),w&&function(){var e=d.attribute;d.attribute=function(t,n,r){return d.class(n)||e&&e(t,n,r)}}();p!==i;){if(!0!==function(e){return u&&y.some(function(t){return t(e)})}(p)){if(n(h,p,d,g,i))break;if(s(p,d,g,i))break;n(h,p,d,g),g.length===m&&s(p,d,g),g.length===m&&o(h,p,d,g)}p=p.parentNode,m=g.length}if(p===i){var b=l(h,p,d);g.unshift(b)}return g.join(" ")};var u={attribute:function(e){return["style","data-reactid","data-react-checksum"].indexOf(e)>-1}};e.exports=t.default});C(be);var ve=O(function(e,t){function n(e,t,n,s){if(e.length&&(e+=" "),n.length&&(n=" "+n),/\[*\]/.test(t)){var i=t.replace(/=.*$/,"]"),o=""+e+i+n;if(r(w=document.querySelectorAll(o),s))t=i;else for(var l=document.querySelectorAll(""+e+i),a=function(){var i=l[u];if(s.some(function(e){return i.contains(e)})){var a=i.tagName.toLowerCase();return o=""+e+a+n,w=document.querySelectorAll(o),r(w,s)&&(t=a),"break"}},u=0,c=l.length;u<c;u++){if("break"===a())break}}if(/>/.test(t)){var h=t.replace(/>/,""),o=""+e+h+n;r(w=document.querySelectorAll(o),s)&&(t=h)}if(/:nth-child/.test(t)){var f=t.replace(/nth-child/g,"nth-of-type"),o=""+e+f+n;r(w=document.querySelectorAll(o),s)&&(t=f)}if(/\.\S+\.\S+/.test(t)){for(var d=t.trim().split(".").slice(1).map(function(e){return"."+e}).sort(function(e,t){return e.length-t.length});d.length;){var g=t.replace(d.shift(),"").trim();if(!(o=(""+e+g+n).trim()).length||">"===o.charAt(0)||">"===o.charAt(o.length-1))break;r(w=document.querySelectorAll(o),s)&&(t=g)}if((d=t&&t.match(/\./g))&&d.length>2)for(var p=document.querySelectorAll(""+e+t),m=function(){var i=p[u];if(s.some(function(e){return i.contains(e)})){var l=i.tagName.toLowerCase();return o=""+e+l+n,w=document.querySelectorAll(o),r(w,s)&&(t=l),"break"}},u=0,c=p.length;u<c;u++){var w;if("break"===m())break}}return t}function r(e,t){var n=e.length;return n===t.length&&t.every(function(t){for(var r=0;r<n;r++)if(e[r]===t)return!0;return!1})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Array.isArray(t)||(t=t.length?(0,ye.convertNodeList)(t):[t]),!t.length||t.some(function(e){return 1!==e.nodeType}))throw new Error('Invalid input - to compare HTMLElements its necessary to provide a reference of the selected node(s)! (missing "elements")');var i=(0,s.default)(t[0],r),o=e.replace(/> /g,">").split(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)/);if(o.length<2)return n("",e,"",t);for(var l=[o.pop()];o.length>1;){var a=o.pop(),u=o.join(" "),c=l.join(" "),h=u+" "+c;document.querySelectorAll(h).length!==t.length&&l.unshift(n(u,a,c,t))}return l.unshift(o[0]),o=l,o[0]=n("",o[0],o.slice(1).join(" "),t),o[o.length-1]=n(o.slice(0,-1).join(" "),o[o.length-1],"",t),i&&delete me.document,o.join(" ").replace(/>/g,"> ").trim()};var s=function(e){return e&&e.__esModule?e:{default:e}}(we);e.exports=t.default});C(ve);var Se=O(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getCommonAncestor=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).root,n=void 0===t?document:t,r=[];e.forEach(function(e,t){for(var s=[];e!==n;)e=e.parentNode,s.unshift(e);r[t]=s}),r.sort(function(e,t){return e.length-t.length});for(var s=r.shift(),i=null,o=0,l=s.length;o<l&&"break"!==function(){var e=s[o];if(r.some(function(t){return!t.some(function(t){return t===e})}))return"break";i=e}();o++);return i},t.getCommonProperties=function(e){var t={classes:[],attributes:{},tag:null};return e.forEach(function(e){var n=t.classes,r=t.attributes,s=t.tag;if(void 0!==n){var i=e.getAttribute("class");i?(i=i.trim().split(" "),n.length?(n=n.filter(function(e){return i.some(function(t){return t===e})})).length?t.classes=n:delete t.classes:t.classes=i):delete t.classes}if(void 0!==r&&function(){var n=e.attributes,s=Object.keys(n).reduce(function(e,t){var r=n[t],s=r.name;return r&&"class"!==s&&(e[s]=r.value),e},{}),i=Object.keys(s),o=Object.keys(r);i.length?o.length?(r=o.reduce(function(e,t){var n=r[t];return n===s[t]&&(e[t]=n),e},{}),Object.keys(r).length?t.attributes=r:delete t.attributes):t.attributes=s:delete t.attributes}(),void 0!==s){var o=e.tagName.toLowerCase();s?o!==s&&delete t.tag:t.tag=o}}),t}});C(Se);Se.getCommonAncestor,Se.getCommonProperties;var xe=O(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(3===e.nodeType&&(e=e.parentNode),1!==e.nodeType)throw new Error('Invalid input - only HTMLElements or representations of them are supported! (not "'+(void 0===e?"undefined":o(e))+'")');var n=(0,l.default)(e,t),r=(0,a.default)(e,t),s=(0,u.default)(r,e,t);return n&&delete me.document,s}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Array.isArray(e)||(e=(0,ye.convertNodeList)(e)),e.some(function(e){return 1!==e.nodeType}))throw new Error("Invalid input - only an Array of HTMLElements or representations of them is supported!");var n=(0,l.default)(e[0],t),s=r((0,Se.getCommonAncestor)(e,t),t),o=i(e)[0],a=(0,u.default)(s+" "+o,e,t),c=(0,ye.convertNodeList)(document.querySelectorAll(a));return e.every(function(e){return c.some(function(t){return t===e})})?(n&&delete me.document,a):console.warn("\n      The selected elements can't be efficiently mapped.\n      Its probably best to use multiple single selectors instead!\n    ",e)}function i(e){var t=(0,Se.getCommonProperties)(e),n=t.classes,r=t.attributes,s=t.tag,i=[];if(s&&i.push(s),n){var o=n.map(function(e){return"."+e}).join("");i.push(o)}if(r){var l=Object.keys(r).reduce(function(e,t){return e.push("["+t+'="'+r[t]+'"]'),e},[]).join("");i.push(l)}return i.length,[i.join("")]}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.getSingleSelector=r,t.getMultiSelector=s,t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.length&&!e.name?s(e,t):r(e,t)};var l=n(we),a=n(be),u=n(ve)});C(xe);xe.getSingleSelector,xe.getMultiSelector;var Ae=O(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.common=t.optimize=t.getMultiSelector=t.getSingleSelector=t.select=void 0,Object.defineProperty(t,"getSingleSelector",{enumerable:!0,get:function(){return xe.getSingleSelector}}),Object.defineProperty(t,"getMultiSelector",{enumerable:!0,get:function(){return xe.getMultiSelector}});var r=n(xe),s=n(ve),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(Se);t.select=r.default,t.optimize=s.default,t.common=i,t.default=r.default});C(Ae);Ae.common,Ae.optimize,Ae.getMultiSelector,Ae.getSingleSelector;var Ee=Ae.select;class Ce{constructor(){this.selectorName="css"}build(e,t,n){const r=n||new Oe,s=this;return Ee(t,{root:e||t.ownerDocument,ignore:{attribute:(t,n,i)=>!("id"!==t||!r.ignoreDynamicIds||!z.isDynamicString(n,e))||(!("class"!==t||!r.ignoreUnsafeClasses||!s.isIgnoredClass(n.split(" ").map(e=>e.trim())))||i(t,n))}})}getDefaultOptions(){return[{ignoreDynamicIds:!0,ignoreUnsafeClasses:!0}]}convertOptions(e){const t=new Oe;return Object.assign(t,e)}isIgnoredClass(e){return e.some(e=>/hover|over|^in$|active|inactive|selected|open|closed|focus|clearfix|enable|disable/i.test(e))}}class Oe{constructor(){this.selectorName="css",this.ignoreDynamicIds=!0,this.ignoreUnsafeClasses=!0}}class Ne{constructor(){this.selectorName="link-text"}build(e,t,n){return s(t)}getDefaultOptions(){return[{}]}convertOptions(e){return{selectorName:this.selectorName}}}var Te;!function(e){e[e.Nothing=0]="Nothing",e[e.Unique=1]="Unique",e[e.Ambiguous=2]="Ambiguous"}(Te||(Te={}));class ke{constructor(){this.selectorName="rxpath",this.xpathCompatible=!1,this.useDocumentAsRoot=!1,this.costQuantile=.5,this.maxMatchLength=60,this.allowIndices=!0,this.allowAttributes=!0,this.allowUid=!0,this.allowText=!0,this.allowClass=!0,this.forceDeepLevelSkip=!1,this.ignoreDynamicIds=!0,this.relaxedIntermediateUniques=!1,this.usePartialClassNameMatching=!0,this.leftTrimPaths=!0,this.tagScore={html:0,body:0,head:0,["*"]:20,form:60,frame:80,iframe:80,map:50,menu:50,ol:60,select:60,table:60,ul:60,article:50,nav:60,section:60,customElements:100},this.attributeScore={id:200,smartid:120,innertext:140,pathname:125,href:120,media:105,ping:100,title:130,rel:100,type:100,target:100,name:150,action:145,method:135,src:100,alt:170,usemap:130,value:120,label:150,data:110,placeholder:100,required:100,wrap:100,icon:100,class:100,safeclass:120,role:160},this.attributeWeightRules={pathname(e,t){const n=f(e,"pathname");return""===n||"/"===n?0:t}},this.attributeMaxLen={safeclass:150},this.resolveWeight=((e,t)=>{const n=this.attributeScore,r=this.attributeWeightRules;if(!n[t])return 0;if(!e||!r[t])return n[t]||0;const s=r[t];if("function"==typeof s)return s(e,n[t]);if("object"==typeof s){const n=f(e,t);return n&&-1===s.valueBlacklist.indexOf(n)?s.defaultWeight:0}return 0})}}ke.instance=new ke;class De{constructor(){this.selectorName="rxpath"}static useId(e,t){return!!e.allowUid&&(!(!t.id||/^\s+$/.test(t.id))&&(!e.ignoreDynamicIds||!z.isDynamic(t)))}static buildElementPath(e,t,n){let r=t;const s=[],i=Object.assign({},ke.instance,n);for(;r&&(s.unshift(r),r!==e);){const e=r.parentElement;if(!e)break;r=e}const o=r;if(1===s.length)return new ne(!0,[],null);(!i.xpathCompatible||i.xpathCompatible&&!i.useDocumentAsRoot)&&s.splice(0,1);const l=[],a=[];if(i.allowUid)for(let t=s.length-1;t>=0;t--){const n=s[t],r=n.getAttribute("id");if(De.useId(i,n)){let i=null,o=-1;for(let e=t-1;e>=0;e--)if(p(s[e])||s[e].ownerDocument.documentElement===s[e]){o=e,i=s[e];break}if(-1===o){if(!e||!p(e)&&e.ownerDocument.documentElement!==e)break;o=-1,i=e}r&&i&&i.ownerDocument.getElementById(r)===n?(s.splice(o+1,t-o-1),l.push(s.length-o-2),a.push(r),t=o+1):console.debug("RxPathSelector: uid step was skipped because id '"+r+"' did not return the correct element.")}}let u=[];if(i.usePartialClassNameMatching){const e=w(t.ownerDocument);u=H.analyze(e).dynamicValues||[]}const c=[],h=[],f=[],d=[],g=[];let m=l.length-1;for(let e=0;e<s.length;e++){const t=s.length-1-e;l.indexOf(t)>=0?(d[e]=a[m],m--):d[e]=null}let y=s.length;const b=[];for(let e=0;e<s.length;e++)b[e]=!0,f[e]=0,h[e]=!1;const v=D(s,i);if(s.length>2){const e=[];for(let t=0;t<v.length-1;t++)e.push({index:t,score:v[t]});e.sort((e,t)=>t.score-e.score),y=Math.floor(i.costQuantile*e.length);for(let t=0;t<e.length;t++)b[e[t].index]=t<y}for(let e=0;e<s.length;e++)c[e]=0,d[e]||p(s[e])?g[e]=!0:g[e]=b[e];let S=new ne(!1,[],null),x=-1,A=0;for(;;){x+=A,A=-1;for(let e=x+1;e<s.length;e++)if(g[e]){A=e-x;break}if(-1===A){S=N(s,0,s.length-1,c,h,f,d,g,i,u);break}let e=x+A,t=!1;c[e]=1;const n=(new pe).apply;for(;;){let r;r=N(s,x+1,x+A,c,h,f,d,g,i,u);const l=x>=0?s[x]:o;let a;const p=r.optimize();let m;if((m=0===(a=i.xpathCompatible?n(l,p.toString(!0),!1):p.apply(l,!1)).length?Te.Nothing:a.length>1?Te.Ambiguous:Te.Unique)===Te.Nothing&&-1!==c[e]){c[e]=-1;continue}if(m===Te.Nothing&&-1===c[e]){S=N(s,0,s.length-1,c,h,f,d,g,i,u);break}const w=e===s.length-1;if(m!==Te.Unique||w&&0===c[e])if(m===Te.Ambiguous&&h[e]&&-1!==c[e]){if(i.relaxedIntermediateUniques&&!w)break;e>0&&!g[e-1]&&A>1?(g[e-1]=!0,c[e]=1,f[e-=1]=0,A-=1,t=!1):c[e]=-1}else{if(m===Te.Ambiguous&&-1===c[e]){S=N(s,0,s.length-1,c,h,f,d,g,i,u);break}t?f[e]=Math.max(0,f[e]-1):c[e]++}else{if(t||c[e]<2){S=N(s,x+1,x+A,c,h,f,d,g,i,u);break}t=!0,f[e]++}}}if(null===S||e&&e.parentElement||(S.absolute=!0),i.xpathCompatible)return S;if(i.leftTrimPaths){let t=S.clone(),n=0;for(let r=0;r<t.steps.length-2;r++){const s=t.clone();if(s.steps[r]=new re(s,X.DescendantOrSelf,null,!1),1!==s.apply(e,!1).length)break;n++,t=s}return t.steps=t.steps.slice(Math.max(0,n-1)),t}return S}build(e,t,n){return De.buildElementPath(e,t,n).toString(!1)}getDefaultOptions(){const{ignoreDynamicIds:e,relaxedIntermediateUniques:t,usePartialClassNameMatching:n,leftTrimPaths:r}=ke.instance;return[{ignoreDynamicIds:e,relaxedIntermediateUniques:t,usePartialClassNameMatching:n,leftTrimPaths:r}]}convertOptions(e){return Object.assign({},ke.instance,e)}}class Pe extends ke{constructor(){super(),this.xpathCompatible=!0,this.useDocumentAsRoot=!1}}Pe.instance=new Pe;class Ie{constructor(){this.selectorName="xpath"}build(e,t,n){(n=n||Pe.instance).xpathCompatible=!0;let r,s=De.buildElementPath(e,t,n).toString(!1);for(;s!==r;)s=(r=s).replace("///","//");return r}getDefaultOptions(){const{ignoreDynamicIds:e,relaxedIntermediateUniques:t,useDocumentAsRoot:n}=Pe.instance;return[{ignoreDynamicIds:e,relaxedIntermediateUniques:t,useDocumentAsRoot:n}]}convertOptions(e){return Object.assign({},Pe.instance,e)}}class qe{constructor(e,t){if(this.builders=e,this.evaluators=t,this.highlightedElements=new Array,this.highlightStyle="orange dashed 2px",L.log("[rxsesut] ctor"),0===e.length&&0===t.length)throw new Error("no builders or evaluators registered")}getDefaultOptions(){if(0===this.builders.length)throw new Error("no builders registered");return this.builders.map(e=>({name:e.selectorName,options:e.getDefaultOptions()})).reduce((e,t)=>(e[t.name]=t.options,e),{})}buildSelectorsOfType(e,t,n){if(!e)throw new Error("invalid arg: elem");const r="string"==typeof t?this.builders.find(e=>e.selectorName===t):t;if(!r)throw new Error(`unknown builder: ${r}`);return n.map(t=>{t=Object.assign({},t,{useDocumentAsRoot:!0});const n=r.build(e.ownerDocument.documentElement,e,r.convertOptions(t)),s=this.tryApplySelector(e.ownerDocument.documentElement,n,r.selectorName);return{matchingElements:Array.isArray(s)?s.length:null,options:t,selector:n}})}buildSelectors(e,t){if(0===this.builders.length)throw new Error("no builders registered");if(!e)throw new Error("invalid arg: elem");return this.builders.map(n=>({name:n.selectorName,selectors:this.buildSelectorsOfType(e,n,t[n.selectorName])})).reduce((e,t)=>(e[t.name]=t.selectors,e),{})}autoEvaluateSelector(e,t,n=0){L.log("[rxsesut] try apply",e,n);let r={elements:[],selectorName:null};e&&(r=this.evaluators.reduce((n,r)=>{if(!t||t===r.selectorName)try{if(1!==n.elements.length){const t=this.applySelector(document.documentElement,e,r.selectorName);t.length>0&&(t.length<n.elements.length||n.elements.length<1)&&(n.elements=t,n.selectorName=r.selectorName)}}catch(e){}return n},{elements:[],selectorName:null}));let s=!1;if(null!==n&&r.elements.length>0){n=((e,t,n)=>e<t?n:e>n?t:e)(n,0,r.elements.length-1)||0;const e=r.elements[n];s=window.$0!==e,window.inspect(e),e.scrollIntoView&&e.scrollIntoView(!1)}return{inspectIndex:n,inspectedChanged:s,length:r.elements.length,selectorName:r.selectorName}}applySelector(e,t,n){const r=this.tryApplySelector(e,t,n);switch(r){case"noEval":throw new Error("no evaluators registered");case"unknownEval":throw new Error("unknown selector-type requested");default:return r}}buildHappySelectorOfType(e,t,n){if(0===this.builders.length)throw new Error("no builders registered");if(!e)throw new Error("invalid arg: elem");return this.buildSelectorsOfType(e,t,n).filter(e=>e.matchingElements&&e.matchingElements>0).sort((e=>(t,n)=>e(t)<e(n)?-1:e(n)<e(t)?1:0)(e=>e.matchingElements))[0]}buildHappySelector(e,t){if(L.log("[rxsesut] build happy for",e),0===this.builders.length)throw new Error("no builders registered");if(!e)throw new Error("invalid arg: elem");const n=this.buildSelectors(e,t),[r,s]=Object.entries(n).reduce((e,[t,n])=>e.concat(n.filter(e=>e.matchingElements>0).map(e=>[t,e])),[]).sort(([e,t],[n,r])=>t.matchingElements<r.matchingElements?-1:r.matchingElements<t.matchingElements?1:"css"===e?-1:"css"===n?1:0)[0];return L.log("[rxsesut] happy = ",s),s}highlightElementsBySelector(e,t){const n=this.tryApplySelector(document.documentElement,e,t);this.highlightElements(n)}unhighlightElements(){this.highlightedElements.forEach(e=>{e.element.style.setProperty("outline",e.originalOutline,e.originalPriority)}),this.highlightedElements=[]}highlightElements(e){this.unhighlightElements(),e&&(this.highlightedElements=e.map(e=>{const t=e.style.getPropertyValue("outline"),n=e.style.getPropertyPriority("outline");return e.style.setProperty("outline",this.highlightStyle,"important"),{element:e,originalOutline:t,originalPriority:n}}))}tryApplySelector(e,t,n){if(0===this.evaluators.length)return"noEval";const r=this.evaluators.filter(e=>e.selectorName===n);return 0===r.length?"unknownEval":r.map(n=>n.apply(e,t,!1)).reduce((e,t)=>e.concat(t),[])}}return q(window),e.initializeContentScript=q,e}({});